<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>বাংলাদেশ টি এস সি ফাউন্ডেশন — হোম</title>

<!-- ===== Fonts (ঐচ্ছিক) ===== -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet"/>

<style>
  /* ========= CSS RESET ========= */
  *,*::before,*::after{box-sizing:border-box}
  html,body{margin:0;padding:0;height:100%}
  body{font-family:"Noto Sans Bengali",system-ui,-apple-system,Arial; line-height:1.5; color:var(--fg); background:var(--bg);}

  /* ========= THEME TOKENS ========= */
  :root{
    --fg:#111; --fg-soft:#333; --bg:#0b172a; /* initial will be dark, but we’ll toggle */
    --card:#ffffffcc; --card-dk:#101827cc;
    --acc:#00897B; --acc-2:#26C6DA; --muted:#8fa3b9;
    --grad-1:#2e026d; --grad-2:#15162c; --grad-3:#0f766e; --grad-4:#1d4ed8;
    --ring:#22c55e;
    --shadow:0 6px 22px rgba(0,0,0,.18);
  }
  .light{ --fg:#111; --bg:#eef3f9; --card:#ffffffcc; --card-dk:#ffffffcc; }
  .dark { --fg:#e5e7eb; --bg:#0b172a; --card:#0b172acc; --card-dk:#0b172acc; }

  /* 10 theme presets (change --acc / --grad-x quickly) */
  .t-1{--acc:#00897B;--grad-1:#0ea5e9;--grad-2:#0284c7;--grad-3:#0f766e;--grad-4:#22d3ee}
  .t-2{--acc:#7c3aed;--grad-1:#7c3aed;--grad-2:#9333ea;--grad-3:#22c55e;--grad-4:#06b6d4}
  .t-3{--acc:#ef4444;--grad-1:#ef4444;--grad-2:#f59e0b;--grad-3:#22c55e;--grad-4:#3b82f6}
  .t-4{--acc:#10b981;--grad-1:#10b981;--grad-2:#059669;--grad-3:#06b6d4;--grad-4:#1d4ed8}
  .t-5{--acc:#0ea5e9;--grad-1:#0ea5e9;--grad-2:#22d3ee;--grad-3:#06b6d4;--grad-4:#3b82f6}
  .t-6{--acc:#f59e0b;--grad-1:#f59e0b;--grad-2:#ef4444;--grad-3:#a855f7;--grad-4:#22d3ee}
  .t-7{--acc:#e11d48;--grad-1:#e11d48;--grad-2:#f43f5e;--grad-3:#8b5cf6;--grad-4:#22d3ee}
  .t-8{--acc:#16a34a;--grad-1:#16a34a;--grad-2:#84cc16;--grad-3:#06b6d4;--grad-4:#2563eb}
  .t-9{--acc:#2563eb;--grad-1:#2563eb;--grad-2:#1d4ed8;--grad-3:#0ea5e9;--grad-4:#22c55e}
  .t-10{--acc:#fb923c;--grad-1:#fb923c;--grad-2:#f97316;--grad-3:#22c55e;--grad-4:#60a5fa}

  /* ========= Animated 4-color gradient (changes every minute) ========= */
  body::before{
    content:"";
    position:fixed; inset:1rem; /* মার্জিন all sides */
    border-radius:16px;
    background: linear-gradient(120deg, var(--grad-1), var(--grad-2), var(--grad-3), var(--grad-4));
    background-size: 300% 300%;
    animation: gradFlow 60s ease-in-out infinite; /* প্রতি মিনিটে রঙ বদল */
    z-index:-2;
    filter: saturate(120%);
  }
  @keyframes gradFlow{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }
  /* Natural scenery background image overlay */
  body::after{
    content:"";
    position:fixed; inset:1rem;
    border-radius:16px;
    background-image:url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop'); /* scenic */
    background-size:cover; background-position:center;
    mix-blend-mode:overlay; opacity:.18; z-index:-1;
    pointer-events:none;
  }

  /* ========= Layout ========= */
  .container{max-width:1400px;margin:0 auto;padding:1rem}
  .topbar{display:flex;gap:1rem;align-items:center}
  .breaking{
    flex:7; /* 70% */
    background:linear-gradient(90deg, rgba(0,0,0,.2), rgba(0,0,0,.05));
    border:1px solid rgba(255,255,255,.15);
    border-radius:12px; backdrop-filter: blur(4px);
    color:var(--fg); overflow:hidden; position:relative; height:48px; display:flex;align-items:center;
  }
  .breaking span.label{background:var(--acc); color:#fff; padding:.35rem .6rem; margin:.2rem .6rem; border-radius:8px; font-weight:700}
  .marquee{white-space:nowrap; overflow:hidden; width:100%}
  .marquee .flow{display:inline-block; padding-left:100%; animation: ticker 25s linear infinite}
  @keyframes ticker{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

  .social{
    flex:3; /* 30% */
    display:flex; justify-content:flex-end; gap:.5rem; align-items:center;
  }
  .icon{width:36px;height:36px; display:grid; place-items:center; border-radius:50%;
    background:rgba(255,255,255,.2); color:#fff; text-decoration:none; backdrop-filter: blur(4px); border:1px solid rgba(255,255,255,.2)}
  .icon:hover{transform:translateY(-2px)}
  .toolbar{display:flex; gap:.5rem; margin-top:.6rem; align-items:center; justify-content:flex-end}
  .btn{padding:.45rem .7rem;border-radius:8px;border:1px solid rgba(255,255,255,.25); background:var(--card); cursor:pointer}
  .chip{padding:.35rem .6rem;border-radius:999px;border:1px solid rgba(255,255,255,.25);cursor:pointer}

  /* ========= Header branding ========= */
  header.brand{display:flex; align-items:center; gap:1rem; margin:1rem 0;}
  .logoWrap{
    width:70px; height:70px; border-radius:50%; border:3px solid var(--acc);
    display:grid;place-items:center; background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.25), transparent);
    animation: slowSpin 60s linear infinite; /* ঘড়ির কাঁটার মত ধীরে */
  }
  @keyframes slowSpin { from{transform:rotate(0)} to{transform:rotate(360deg)} }
  .brand h1{margin:0; font-size:1.6rem; color:#fff}
  .brand .slogan{margin-top:.2rem;color:#e2e8f0}

  /* ========= Navigation ========= */
  nav{position:sticky; top:.5rem; z-index:20; margin:1rem 0;}
  .menu{
    display:flex; gap:.5rem; flex-wrap:wrap; padding:.5rem; border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,.25), rgba(255,255,255,.1));
    backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,.25);
  }
  .menu > li{list-style:none; position:relative}
  .menu > li > a{
    display:block; padding:.65rem .9rem; border-radius:10px; color:#fff; text-decoration:none; font-weight:700;
    border:1px solid rgba(255,255,255,.2);
  }
  .menu > li > a:hover{background:rgba(0,0,0,.15)}
  .menu > li.home > a{box-shadow:0 0 14px var(--ring), inset 0 0 0 2px var(--ring); animation:pulse 2s ease-in-out infinite}
  @keyframes pulse{0%,100%{box-shadow:0 0 14px var(--ring), inset 0 0 0 2px var(--ring)}50%{box-shadow:0 0 2px var(--ring), inset 0 0 0 2px var(--ring)}}
  .menu > li.active > a{background:linear-gradient(90deg, var(--grad-1), var(--grad-4));}

  /* dropdown */
  .dropdown{position:absolute; left:0; top:110%; min-width:220px; background:var(--card);
    border:1px solid rgba(0,0,0,.08); border-radius:10px; box-shadow:var(--shadow); opacity:0; pointer-events:none; transform:translateY(6px); transition:.15s}
  .menu > li:hover .dropdown{opacity:1; pointer-events:auto; transform:translateY(0)}
  .dropdown a{display:block; padding:.6rem .75rem; color:var(--fg); text-decoration:none; border-bottom:1px dashed rgba(0,0,0,.08)}
  .dropdown a:hover{background:rgba(0,0,0,.06)}
  .dropdown a:last-child{border-bottom:none}

  /* ========= Main grid with 6 sidebars ========= */
  .grid{
    display:grid; gap:1rem;
    grid-template-columns: 260px 1fr 260px; /* left - center - right */
  }
  .sidebar{display:flex; flex-direction:column; gap:1rem}
  .card{
    background:var(--card); border:1px solid rgba(255,255,255,.25);
    border-radius:12px; box-shadow:var(--shadow); padding:1rem; color:var(--fg);
  }
  .card h3{margin:.2rem 0 .6rem}

  /* left: clock + prayer + custom */
  .clockCanvas{width:100%; aspect-ratio:1/1; background:radial-gradient(circle at 50% 55%, rgba(255,255,255,.4), rgba(255,255,255,.08)); border-radius:12px}
  .prayer-grid{display:grid; grid-template-columns:1fr 1fr; gap:.5rem; font-weight:600}
  .muted{color:var(--muted); font-weight:600; font-size:.92rem}

  /* right: dashboard numbers */
  .stats{display:grid; grid-template-columns:1fr 1fr; gap:.6rem}
  .kpi{background:linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.15)); padding:.7rem; border-radius:10px; border:1px solid rgba(255,255,255,.35)}
  .kpi b{display:block; font-size:1.1rem}

  /* center: slider + 4 posts (2+2) */
  .slider{position:relative; overflow:hidden; border-radius:12px; height:340px; background:#00000022}
  .slides{display:flex; height:100%; transition:transform .6s ease}
  .slides img{width:100%; height:100%; object-fit:cover; flex:0 0 100%}
  .slide-ctrl{position:absolute; inset:auto 0 10px 0; display:flex; gap:.5rem; justify-content:center}
  .slide-ctrl button{padding:.35rem .6rem; border-radius:999px; border:1px solid rgba(255,255,255,.5); background:rgba(0,0,0,.35); color:#fff}
  .slide-add{display:flex; gap:.5rem; margin:.6rem 0; align-items:center}
  .posts{display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin-top:1rem}
  .post{min-height:160px}

  /* ========= Footer 4 columns ========= */
  footer{margin-top:1rem}
  .footer{
    display:grid; gap:1rem; grid-template-columns:repeat(4,1fr);
    background: linear-gradient(120deg, var(--grad-1), var(--grad-4));
    border:1px solid rgba(255,255,255,.15);
    padding:1.2rem; border-radius:12px; color:#fff;
  }
  .footer .col{background:rgba(0,0,0,.15); padding:1rem; border-radius:10px; min-height:120px}
  .admin-btn{display:inline-flex; align-items:center; gap:.4rem; padding:.55rem .8rem; border-radius:10px; background:#111827cc; color:#fff; text-decoration:none; border:1px solid rgba(255,255,255,.35)}
  .admin-btn:hover{transform:translateY(-2px)}

  /* ========= Search print zone ========= */
  .search-input{width:100%; padding:.6rem .7rem; border-radius:10px; border:1px solid rgba(0,0,0,.1)}
  .results{max-height:220px; overflow:auto; margin-top:.5rem}
  .print-btn{margin-top:.5rem}

  /* ========= PRINT STYLES (লোগো, নাম, স্লোগান রেখে বাকিটা ক্লিন) ========= */
  @media print{
    body::before, body::after, nav, .toolbar, .social, .sidebar, .slider, .posts, .footer{display:none !important;}
    .container{max-width:100%; padding:0}
    header.brand{border-bottom:2px solid #000; margin-bottom:.5rem}
    .brand h1, .brand .slogan{color:#000!important}
    .printable-area{display:block!important}
  }
</style>
</head>
<body class="dark t-1">

<div class="container">

  <!-- ======= Top: Breaking + Social + Theme tools ======= -->
  <div class="topbar">
    <div class="breaking">
      <span class="label">ব্রেকিং</span>
      <div class="marquee"><div class="flow" id="breakingFlow">
        স্বাগতম! — সদস্য নিবন্ধন চলছে — নতুন প্রকল্প শীঘ্রই — অনুদানের হালনাগাদ তথ্য দেখুন —
      </div></div>
    </div>
    <div class="social">
      <a class="icon" href="#" title="Facebook">f</a>
      <a class="icon" href="#" title="YouTube">▶</a>
      <a class="icon" href="#" title="X/Twitter">x</a>
      <a class="icon" href="#" title="LinkedIn">in</a>
      <a class="icon" href="#" title="WhatsApp">wa</a>
    </div>
  </div>

  <div class="toolbar">
    <button class="btn" id="modeToggle">ডার্ক/লাইট</button>
    <span class="muted">থিম:</span>
    <button class="chip" data-theme="t-1">1</button>
    <button class="chip" data-theme="t-2">2</button>
    <button class="chip" data-theme="t-3">3</button>
    <button class="chip" data-theme="t-4">4</button>
    <button class="chip" data-theme="t-5">5</button>
    <button class="chip" data-theme="t-6">6</button>
    <button class="chip" data-theme="t-7">7</button>
    <button class="chip" data-theme="t-8">8</button>
    <button class="chip" data-theme="t-9">9</button>
    <button class="chip" data-theme="t-10">10</button>
  </div>

  <!-- ======= Branding ======= -->
  <header class="brand">
    <div class="logoWrap"><strong>লোগো</strong></div>
    <div class="brand">
      <h1>বাংলাদেশ টি এস সি ফাউন্ডেশন</h1>
      <div class="slogan">— মানবতার কল্যাণে একসাথে —</div>
    </div>
  </header>

  <!-- ======= Navigation ======= -->
  <nav>
    <ul class="menu">
      <li class="home active"><a href="index.html">হোম</a></li>

      <li><a href="signup.html">সাইনআপ/সাইনইন</a>
        <div class="dropdown">
          <a href="signup.html#signin">সাইনইন</a>
          <a href="signup.html#reset">পাসওয়ার্ড রিসেট</a>
        </div>
      </li>

      <li><a href="members.html">সদস্য</a>
        <div class="dropdown">
          <a href="shuvakankhi.html">শুভাকাঙ্ক্ষী</a>
          <a href="benefits.html">সদস্য সুবিধা</a>
          <a href="profile.html">আমার প্রোফাইল</a>
        </div>
      </li>

      <li><a href="invest.html">ইনভেস্ট</a>
        <div class="dropdown">
          <a href="projects.html">প্রকল্পসমূহ</a>
          <a href="media.html">নোটিশ/মিডিয়া</a>
        </div>
      </li>

      <li><a href="contact.html">যোগাযোগ</a>
        <div class="dropdown">
          <a href="diary.html">ডায়েরি/ব্লগ</a>
          <a href="#policy">নীতিমালা</a>
        </div>
      </li>
    </ul>
  </nav>

  <!-- ======= Main Grid (Left 3 cards, Center, Right 3 cards) ======= -->
  <div class="grid">

    <!-- Left sidebars -->
    <aside class="sidebar">
      <!-- Live Analog Clock -->
      <section class="card">
        <h3>লাইভ ঘড়ি</h3>
        <canvas id="clock" class="clockCanvas" width="240" height="240" aria-label="Analog Clock"></canvas>
        <div class="muted" id="clockText"></div>
        <hr style="margin:.7rem 0;opacity:.35">
        <h3>সালাত সময়সূচি</h3>
        <div class="prayer-grid" id="prayers">
          <div>ফজর</div><div id="p-fajr">5:00 AM</div>
          <div>যুহর</div><div id="p-dhuhr">12:10 PM</div>
          <div>আসর</div><div id="p-asr">4:35 PM</div>
          <div>মাগরিব</div><div id="p-maghrib">6:10 PM</div>
          <div>ইশা</div><div id="p-isha">7:30 PM</div>
          <div>সূর্যোদয়</div><div id="p-sunrise">5:35 AM</div>
          <div>সূর্যাস্ত</div><div id="p-sunset">6:08 PM</div>
          <div>নিষিদ্ধ সময়</div><div id="p-forbid">সূর্যোদয়/জেনিথ/সূর্যাস্ত</div>
        </div>
        <div class="muted" style="margin-top:.4rem">কাস্টমাইজ:</div>
        <input class="search-input" id="prayerAdj" placeholder="ফজর=4:55, আসর=4:40 ... লিখে এন্টার দিন" />
      </section>

      <!-- Important links -->
      <section class="card">
        <h3>গুরুত্বপূর্ণ লিংক</h3>
        <ul>
          <li><a href="members.html">সদস্য তালিকা</a></li>
          <li><a href="shuvakankhi.html">শুভাকাঙ্ক্ষী</a></li>
          <li><a href="invest.html">ইনভেস্ট</a></li>
          <li><a href="projects.html">প্রকল্পসমূহ</a></li>
          <li><a href="media.html">নোটিশ/মিডিয়া</a></li>
        </ul>
      </section>

      <!-- Search + Print selected -->
      <section class="card">
        <h3>সার্চ/ফিল্টার + প্রিন্ট</h3>
        <input id="siteSearch" class="search-input" placeholder="বাংলা/ইংরেজি কী-ওয়ার্ড" />
        <div class="results" id="searchResults"></div>
        <button class="btn print-btn" id="printSel">প্রদর্শিত অংশ প্রিন্ট</button>
        <div class="muted">প্রিন্টে লোগো/নাম/স্লোগান অটোমেটিক থাকবে</div>
      </section>
    </aside>

    <!-- Center -->
    <main>
      <!-- Slider -->
      <section class="card printable-area" id="printArea">
        <h3>গ্যালারি স্লাইডার</h3>
        <div class="slide-add">
          <input type="file" id="fileInput" accept="image/*" />
          <input type="url" id="urlInput" placeholder="ইমেজ URL" class="search-input" style="max-width:320px">
          <button class="btn" id="addSlide">যোগ করুন</button>
        </div>
        <div class="slider" id="slider">
          <div class="slides" id="slides">
            <img src="https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=1400" alt="slide-1">
            <img src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1400" alt="slide-2">
          </div>
          <div class="slide-ctrl">
            <button id="prev">◀</button>
            <button id="next">▶</button>
          </div>
        </div>
        <div class="muted">ছবিগুলো প্রতি ১ মিনিট পর নিজে নিজে বদলাবে।</div>
      </section>

      <!-- 2 + 2 posts -->
      <section class="posts">
        <article class="card post" data-keywords="ঘোষণা অনুদান">
          <h3>অনুদানের আপডেট</h3>
          <p>এই মাসে মোট অনুদান লক্ষ্যমাত্রার ৮৫% পূর্ণ।</p>
        </article>
        <article class="card post" data-keywords="প্রকল্প কৃষি উন্নয়ন">
          <h3>কৃষি উন্নয়ন প্রকল্প</h3>
          <p>পাইলট পর্যায়ে ৩২টি প্লটে ফলন বেড়েছে ১৮%।</p>
        </article>
        <article class="card post" data-keywords="সদস্য ভর্তি ঘোষণা">
          <h3>নতুন সদস্য ভর্তি</h3>
          <p>অনলাইনে আবেদন গ্রহণ চলছে।</p>
        </article>
        <article class="card post" data-keywords="শুভাকাঙ্ক্ষী তালিকা স্বেচ্ছাসেবক">
          <h3>স্বেচ্ছাসেবক আহ্বান</h3>
          <p>ইভেন্ট ম্যানেজমেন্ট টিমে যোগ দিন।</p>
        </article>
      </section>
    </main>

    <!-- Right sidebars -->
    <aside class="sidebar">
      <!-- Dashboard summary (from Firestore) -->
      <section class="card">
        <h3>সারাংশ ড্যাশবোর্ড</h3>
        <div class="stats">
          <div class="kpi"><span>বোর্ড সদস্য</span><b id="kpi-board">0</b></div>
          <div class="kpi"><span>মোট সদস্য</span><b id="kpi-members">0</b></div>
          <div class="kpi"><span>শুভাকাঙ্ক্ষী</span><b id="kpi-well">0</b></div>
          <div class="kpi"><span>মোট জনশক্তি</span><b id="kpi-human">0</b></div>
          <div class="kpi"><span>মোট অনুদান</span><b id="kpi-donation">0</b></div>
          <div class="kpi"><span>মোট এন্ট্রি ফি</span><b id="kpi-entry">0</b></div>
          <div class="kpi"><span>মোট ইনভেস্ট</span><b id="kpi-invest">0</b></div>
          <div class="kpi"><span>মোট সম্পদ</span><b id="kpi-asset">0</b></div>
          <div class="kpi"><span>স্থিতিশীল ব্যালেন্স</span><b id="kpi-balance">0</b></div>
          <div class="kpi"><span>ফাউন্ডেশন বয়স</span><b id="kpi-age">00ব 00মা 00দি</b></div>
        </div>
        <div class="muted" style="margin-top:.5rem">
          শুরুর তারিখ: <input type="date" id="startDate" />
        </div>
      </section>

      <!-- Calendar -->
      <section class="card">
        <h3>ক্যালেন্ডার</h3>
        <div id="calendar"></div>
        <div class="muted">সরকারি ছুটি দিনগুলো হাইলাইট করা আছে।</div>
      </section>

      <!-- Post tags -->
      <section class="card">
        <h3>ট্যাগ</h3>
        <div style="display:flex;flex-wrap:wrap;gap:.4rem">
          <span class="chip" data-key="অনুদান">#অনুদান</span>
          <span class="chip" data-key="প্রকল্প">#প্রকল্প</span>
          <span class="chip" data-key="সদস্য">#সদস্য</span>
          <span class="chip" data-key="ইনভেস্ট">#ইনভেস্ট</span>
          <span class="chip" data-key="ইভেন্ট">#ইভেন্ট</span>
        </div>
      </section>
    </aside>
  </div>

  <!-- ======= Footer ======= -->
  <footer>
    <div class="footer">
      <div class="col">
        <h4>ফুটার সেকশন-১</h4>
        <p>এখানে “যোগাযোগের ঠিকানা/হটলাইন/ইমেইল” রাখতে পারেন।</p>
      </div>
      <div class="col">
        <h4>ফুটার সেকশন-২</h4>
        <p>“সাম্প্রতিক পোস্ট/নোটিশ” দেখাতে পারেন।</p>
      </div>
      <div class="col" id="policy">
        <h4>নীতিমালা (সেকশন-৩)</h4>
        <ul>
          <li><a href="#">গোপনীয়তা নীতি</a></li>
          <li><a href="#">ব্যবহারের শর্তাবলি</a></li>
          <li><a href="#">ডেটা নীতিমালা</a></li>
        </ul>
      </div>
      <div class="col">
        <h4>এ্যাডমিন (সেকশন-৪)</h4>
        <a class="admin-btn" href="admin.html">⚙ অ্যাডমিন প্যানেল</a>
        <p class="muted">শুধু অ্যাডমিন রোল থাকলে প্রবেশাধিকার।</p>
      </div>
    </div>
  </footer>
</div>

<!-- ======= Firebase (placeholder) + App Scripts ======= -->
<script type="module">
  /* Firebase */
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";
  import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCBS17HBSz9Z9LXx7jfHGubAFB5u2K0m_I",
	  authDomain: "tsc-1-17edd.firebaseapp.com",
	  projectId: "tsc-1-17edd",
	  storageBucket: "tsc-1-17edd.firebasestorage.app",
	  messagingSenderId: "615501240485",
	  appId: "1:615501240485:web:045dfcee4228bc46cc154c",
	  measurementId: "G-JKXT7CEKBW"
  };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  /* ======== Mode + Theme ======== */
  const modeToggle = document.getElementById('modeToggle');
  modeToggle.onclick = () => {
    document.body.classList.toggle('light');
    document.body.classList.toggle('dark');
  };
  document.querySelectorAll('.chip[data-theme]').forEach(ch=>{
    ch.addEventListener('click',()=> {
      document.body.classList.remove(...[...document.body.classList].filter(c=>/^t-/.test(c)));
      document.body.classList.add(ch.dataset.theme);
    });
  });

  /* ======== Analog Clock ======== */
  const cv = document.getElementById('clock');
  const ctx = cv.getContext('2d');
  const clockText = document.getElementById('clockText');
  function drawClock(){
    const now = new Date();
    const r = cv.width/2; ctx.clearRect(0,0,cv.width,cv.height);
    ctx.translate(r, r);
    // dial
    ctx.beginPath(); ctx.arc(0,0,r-6,0,Math.PI*2); ctx.fillStyle='rgba(255,255,255,.35)'; ctx.fill();
    ctx.strokeStyle='rgba(0,0,0,.35)'; ctx.lineWidth=3; ctx.stroke();
    // marks
    for(let i=0;i<60;i++){
      ctx.rotate(Math.PI/30);
      ctx.beginPath(); ctx.moveTo(r-12,0); ctx.lineTo(r-6,0);
      ctx.lineWidth = (i%5===0)?3:1.5; ctx.strokeStyle='rgba(0,0,0,.6)'; ctx.stroke();
    }
    // hands
    const hr = now.getHours()%12; const mn = now.getMinutes(); const sc = now.getSeconds();
    function hand(angle,len,w){ctx.save(); ctx.rotate(angle); ctx.beginPath(); ctx.moveTo(-6,0); ctx.lineTo(len,0); ctx.lineWidth=w; ctx.strokeStyle='#111'; ctx.stroke(); ctx.restore();}
    hand((Math.PI/6)*hr + (Math.PI/360)*mn + (Math.PI/21600)*sc, r*0.5, 5);
    hand((Math.PI/30)*mn + (Math.PI/1800)*sc, r*0.75, 3);
    hand((Math.PI/30)*sc, r*0.85, 1.5);
    // center
    ctx.beginPath(); ctx.arc(0,0,5,0,Math.PI*2); ctx.fillStyle='#111'; ctx.fill();
    ctx.setTransform(1,0,0,1,0,0);
    clockText.textContent = now.toLocaleString('bn-BD');
  }
  setInterval(drawClock, 1000); drawClock();

  /* ======== Prayer time quick customize (manual adjust string like “ফজর=4:55, আসর=4:40”) ======== */
  const prayerAdj = document.getElementById('prayerAdj');
  const pMap = {ফজর:'p-fajr',যুহর:'p-dhuhr',আসর:'p-asr',মাগরিব:'p-maghrib',ইশা:'p-isha',সূর্যোদয়:'p-sunrise',সূর্যাস্ত:'p-sunset'};
  prayerAdj.addEventListener('keydown',e=>{
    if(e.key==='Enter'){
      e.preventDefault();
      const parts = prayerAdj.value.split(',');
      parts.forEach(x=>{
        const [k,v]=x.split('=').map(s=>s.trim());
        if(pMap[k] && v){ document.getElementById(pMap[k]).textContent=v; }
      });
      prayerAdj.value='';
    }
  });

  /* ======== Search + print selected ======== */
  const posts = [...document.querySelectorAll('[data-keywords]')];
  const results = document.getElementById('searchResults');
  document.getElementById('siteSearch').addEventListener('input', e=>{
    const q = e.target.value.trim().toLowerCase();
    results.innerHTML='';
    if(!q){posts.forEach(p=>p.style.outline='none'); return;}
    posts.forEach(p=>{
      const ok = p.dataset.keywords.toLowerCase().includes(q) || p.textContent.toLowerCase().includes(q);
      p.style.outline = ok ? '3px solid var(--ring)' : 'none';
      if(ok){
        const a = document.createElement('a'); a.href='#'; a.textContent=p.querySelector('h3')?.textContent || 'ম্যাচড';
        a.onclick=(ev)=>{ev.preventDefault(); p.scrollIntoView({behavior:'smooth', block:'center'})}
        results.appendChild(a); results.appendChild(document.createElement('br'));
      }
    });
  });
  document.getElementById('printSel').onclick = ()=>{
    window.print(); /* print styles already limit to printable area + branding */
  };

  /* ======== Slider (auto 60s) ======== */
  const slides = document.getElementById('slides'); let idx=0;
  const updateSlide = ()=>{slides.style.transform=`translateX(${-idx*100}%)`;}
  document.getElementById('next').onclick=()=>{idx=(idx+1)%slides.children.length; updateSlide();}
  document.getElementById('prev').onclick=()=>{idx=(idx-1+slides.children.length)%slides.children.length; updateSlide();}
  setInterval(()=>{idx=(idx+1)%slides.children.length; updateSlide();}, 60000);
  // Add local file / URL
  document.getElementById('addSlide').onclick=()=>{
    const url = document.getElementById('urlInput').value.trim();
    const file = document.getElementById('fileInput').files[0];
    const img = document.createElement('img');
    if(file){
      const reader = new FileReader();
      reader.onload = e=>{ img.src = e.target.result; slides.appendChild(img); }
      reader.readAsDataURL(file);
    } else if(url){
      img.src = url; slides.appendChild(img);
    }
    document.getElementById('fileInput').value=''; document.getElementById('urlInput').value='';
  };

  /* ======== Calendar (simple month render + holiday marks) ======== */
  const cal = document.getElementById('calendar');
  function renderCalendar(d=new Date()){
    const y=d.getFullYear(), m=d.getMonth();
    const first=new Date(y,m,1), last=new Date(y,m+1,0);
    const days=['রবি','সোম','মঙ্গল','বুধ','বৃহ','শুক্র','শনি'];
    let html=`<div style="display:grid;grid-template-columns:repeat(7,1fr);gap:.25rem">`;
    days.forEach(w=>html+=`<div style="text-align:center;font-weight:700">${w}</div>`);
    for(let i=0;i<first.getDay();i++) html+=`<div></div>`;
    const holidays = new Set([21,26]); /* উদাহরণ */
    for(let d1=1; d1<=last.getDate(); d1++){
      const mark = holidays.has(d1)?'background:#ef4444;color:#fff;border-radius:8px;':'';
      html+=`<div style="text-align:center;padding:.35rem; ${mark}">${d1}</div>`;
    }
    html+='</div>';
    cal.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.4rem">
      <button class="btn" id="pm">&larr;</button>
      <b>${y} — ${m+1}</b>
      <button class="btn" id="nm">&rarr;</button>
    </div>` + html;
    document.getElementById('pm').onclick=()=>{const t=new Date(y,m-1,1); renderCalendar(t);}
    document.getElementById('nm').onclick=()=>{const t=new Date(y,m+1,1); renderCalendar(t);}
  }
  renderCalendar();

  /* ======== Dashboard KPIs from Firestore (collection names you already use) ======== */
  async function count(col){ const snap = await getDocs(collection(db, col)); return snap.size; }
  async function sum(col, field){ const snap=await getDocs(collection(db,col)); let s=0; snap.forEach(d=>{ s += Number(d.data()[field]||0) }); return s; }

  async function loadKPIs(){
    try{
      const [board, members, well] = await Promise.all([
        count('boardMembers'), count('members'), count('wellWishers')
      ]);
      const donation = await sum('donations','amount');
      const entryFee = await sum('entryFees','amount');
      const invest = await sum('invests','share');  /* আপনার মডেল অনুযায়ী ফিল্ড পরিবর্তন করুন */
      const asset = await sum('assets','value');
      const balance = await sum('balances','amount');

      document.getElementById('kpi-board').textContent = board;
      document.getElementById('kpi-members').textContent = members;
      document.getElementById('kpi-well').textContent = well;
      document.getElementById('kpi-human').textContent = board + members + well;
      document.getElementById('kpi-donation').textContent = donation.toLocaleString();
      document.getElementById('kpi-entry').textContent = entryFee.toLocaleString();
      document.getElementById('kpi-invest').textContent = invest.toLocaleString();
      document.getElementById('kpi-asset').textContent = asset.toLocaleString();
      document.getElementById('kpi-balance').textContent = balance.toLocaleString();
    }catch(e){ console.warn('KPI error', e); }
  }
  loadKPIs();

  /* ======== Foundation Age (auto) ======== */
  const startDate = document.getElementById('startDate');
  startDate.addEventListener('change', saveAgeStart);
  function saveAgeStart(){ localStorage.setItem('foundationStart', startDate.value); }
  function loadAgeStart(){ const v=localStorage.getItem('foundationStart'); if(v){startDate.value=v;} }
  function renderAge(){
    const sv = startDate.value; if(!sv){ return; }
    const s = new Date(sv), now = new Date();
    let diff = Math.max(0, now - s);
    const sec = Math.floor(diff/1000)%60;
    const min = Math.floor(diff/60000)%60;
    const hr  = Math.floor(diff/3600000)%24;
    const days = Math.floor(diff/86400000);
    const yrs = Math.floor(days/365);
    const mos = Math.floor((days%365)/30);
    const ds = Math.floor((days%365)%30);
    document.getElementById('kpi-age').textContent = `${yrs}ব ${mos}মা ${ds}দি ${hr}:${String(min).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
  }
  loadAgeStart(); setInterval(renderAge, 1000); renderAge();

  /* ======== Breaking news editable (optional from Firestore later) ======== */
  // আপনি চাইলে Firestore "notices" থেকে এনে breakingFlow.textContent সেট করতে পারবেন।

  /* ======== Access control idea (PIN-only view) ========
     বাস্তবে PIN কখনো plaintext রাখবেন না। এখানে ডেমো: যদি user.role!='admin', তবে শুধু হোম/নীতিমালা দেখবে।
     অ্যাডমিন প্যানেলে (admin.html) রোল ম্যানেজ করবেন।
  */
  onAuthStateChanged(auth, async (user)=>{
    // এখানে প্রয়োজনে রোল চেক করে UI/মেনু হাইড করবেন
  });
</script>
</body>
</html>
